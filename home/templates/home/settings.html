{% extends 'home/base.html' %} 
{% load thumbnail %}
{% block title %}<title>
  Fableey Profile Updates</title
>{% endblock %} {% block content %}
<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<!-- cropper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/cropper/4.1.0/cropper.min.css"
/>

<style>
@media screen and (max-width:470px){
  #change_pass{
    margin-top:10px;
  }
}
</style>

{% if messages %} {% for message in messages %}
<div class="alert alert-success" id="alerts" role="alert">
  <p style="color: black; font-size: 30px">{{message}}</p>
</div>
{% endfor %} {% endif %}
<div class="midde_cont">
  <div class="container-fluid">
    <div class="row column_title">
      <div class="col-md-12">
        <div class="page_title">
          <h2 style="line-height:2;">Your Profile should be Orignal and contain High Quality.</h2>
        </div>
      </div>
    </div>
    <!-- row -->
    <div class="row column1">
      <div class="col-md-2"></div>
      <div class="col-md-8">
        <div class="white_shd full margin_bottom_30">
          <div class="full graph_head">
            <div class="heading1 margin_0">
              <h2>{{request.user}} profile</h2>
            </div>
          </div>
          <div class="full price_table padding_infor_info">
            <div class="row">
              <!-- user profile section -->
              <!-- profile image -->
              <div class="col-lg-12">
                <div class="full dis_flex center_text">
                  <div class="profile_img">
                    <img
                      width="200"
                      title="{{request.user}}'s profile picture"
                      src="{{user.profile_image|thumbnail_url:'avatar'}}"
                      alt="{{request.user}}'s profile pic"
                      id="pic"
                    />
                  </div>
                  <div class="profile_contant">
                    <div class="contact_inner">
                      <h3 style='font-family:Chiller;font-size:40px;'>{{request.user}}</h3>
                      <p><strong>About: </strong>Fableey Registered user</p>
                      <ul class="list-unstyled">
                        <li>
                          <i class="fa fa-at" style="color: green"></i> :
                          {{request.user.email}}
                        </li>
                        <li>
                          <i class="fa fa-star"></i> : {{user.first_name}}
                        </li>
                        <li>
                          <i class="fa fa-star"></i> : {{user.second_name}}
                        </li>
                        <li>
                          <i class="fa fa-flag" style="color: crimson"></i> :
                          {{user.country}}
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <!-- profile contant section -->
                <div class="full inner_elements margin_top_30">
                  <!-- jjjjjjjj -->
                  <div id="alert-box"></div>
                  <div id="image-box" class="mb-3"></div>
                  <form
                    action=""
                    method="post"
                    enctype="multipart/form-data"
                    id="image-form"
                  >
                    {% csrf_token %}
                    <div class="form-group">
                       <label for="fname" class="label">First Name : </label>
                       &emsp; &emsp;<input
                         required
                         type="text"
                         class="fields form-control form-control-lg"
                         placeholder="Your first name.."
                         name="fname"
                         id="fname"
                         value={{user.first_name}}
                       />
                    </div>
                    <div class="form-group">
                     <br /><label for="sname" class="label">Second Name :</label>
                     <input
                       type="text"
                       class="fields form-control form-control-lg"
                       required
                       placeholder="Your Second name.."
                       name="sname"
                       id="sname"
                       value={{user.second_name}}
                     />
                     <br/>
                   </div>

                    <div class='form-group'>
                     <label for="country" class="label">Select country :</label>
                     <select name="country_code" class="fields form-select form-select-lg" id="country">
                       <option value="al">Albania</option>
                       <option value="at">Austria</option>
                       <option value="af">Afghanistan</option>
                       <option value="am">Armenia</option>
                       <option value="ar">Argentina</option>
                       <option value="dz">Algeria</option>
                       <option value="az">Azerbaijan</option>
                       <option value="bh">Bahrain</option>
                       <option value="be">Belgium</option>
                       <option value="bz">Belize</option>
                       <option value="bj">Benin</option>
                       <option value="bm">Bermuda</option>
                       <option value="bt">Bhutan</option>
                       <option value="bo">Bolivia</option>
                       <option value="br">Brazil</option>
                       <option value="co">Colombia</option>
                       <option value="cz">Czechia</option>
                       <option value="dk">Denmark</option>
                       <option value="eg">Egypt</option>
                       <option value="fi">Finland</option>
                       <option value="ge">Georgia</option>
                       <option value="de">Germany</option>
                       <option value="hk">Hong Kong</option>
                       <option value="hu">Hungry</option>
                       <option value="is">Iceland</option>
                       <option value="id">Indonesia</option>
                       <option value="ir">Iran</option>
                       <option value="iq">Iraq</option>
                       <option value="it">Italy</option>
                       <option value="ke">Kenya</option>
                       <option value="mx">Mexico</option>
                       <option value="ma">Morocco</option>
                       <option value="pa">Panama</option>
                       <option value="pl">Poland</option>
                       <option value="pt">Portugal</option>
                       <option value="qa">Qatar</option>
                       <option value="ro">Romania</option>
                       <option value="ru">Russia</option>
                       <option value="sg">Singapore</option>
                       <option value="za">South Africa</option>
                       <option value="se">Sweden</option>
                       <option value="tr">Turkey</option>
                       <option value="pk" selected>Pakistan</option>
                       <option value="in">India</option>
                       <option value="us">United states</option>
                       <option value="gb">United Kingdom</option>
                       <option value="au">Austrailia</option>
                       <option value="nz">New zealand</option>
                       <option value="cn">China</option>
                       <option value="es">Spain</option>
                       <option value="sa">Saudi Arabia</option>
                       <option value="kr">Korea</option>
                       <option value="jp">Japan</option>
                       <option value="lk">Sri Lanka</option>
                       <option value="np">Nepal</option>
                       <option value="ca">Canada</option>
                       <option value="my">Malaysia</option>
                       <option value="bd">Bangladesh</option>
                       <option value="il">Israel</option>
                       <option value="fr">France</option>
                       <option value="ae">United Arab Emirates</option>
                       <option value="en">England</option>
                       <option value="ie">Ireland</option>
                     </select>
                     <br/>

                    </div>
                   
                   <div class="form-group">
                     <label for="profile_pic" class="label"
                      >Profile image:</label
                    >
                    &emsp;&emsp;
                    <input
                      type="file"
                      name="file"
                      class='form-control form-control-lg'
                      required
                      accept="image/*"
                      id="id_file"
                      value={{user.profile_image.url}}
                    />
                    <br />
                   </div>
                    <button
                      style="font-size: 20px;"
                      type="submit"
                      onclick="refresh()"
                      class="btn btn-primary"
                    >
                      Update Profile
                    </button>
                    
                    <a
                      style="font-size: 20px;"
                      type="button"
                      href="{% url 'change_password' %}"
                      class="btn btn-danger"
                      id="change_pass"
                    >
                      change passsword
                    </a>
                  </form>
                  <!-- jjjjj -->
                </div>
                <!-- end user profile section -->
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-2"></div>
      </div>
      <!-- end row -->
    </div>

    <div class="mt-3">
      <div class="white_shd full margin_bottom_30">
        <div class="full graph_head">
          <div class="heading1 margin_0">
            <h2>Withdraw Records & History</h2>
          </div>
        </div>
        <div class="table_section padding_infor_info">
          <div class="table-responsive-sm">
            <table class="table table-dark">
              <thead>
                <tr class="text-warning">
                  <th>Amount</th>
                  <th>status</th>
                  <th>Payment method</th>
                  <th>Paid on</th>
                </tr>
              </thead>
              <tbody>
                {% for i in records reversed %}

                <tr>
                  <td>${{i.amount_to_withdraw}}</td>
                  <td>
                    {% if i.status %} paid
                    <i class="fa fa-check text-success"></i> {% else %} Pending
                    {% endif %}
                  </td>
                  <td>{{i.payment_method}}</td>
                  <td>{{i.paid_on}}</td>
                </tr>

                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <script>
      $('#image-form').submit(function(){
        a=$('#country').find('option:selected').text();
        console.log(a);

        var form=$('#image-form');
        var input=`<input
        required
        type="text"
        class="fields form-control form-control-lg"
        name="country_name"
        style="display:none;"
        value=${a}
      />`

        form.append(input);
      })

    </script>
    {% endblock %}
  </div>
</div>
